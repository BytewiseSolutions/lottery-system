<div class="modal fade log-reg-modal-wrapper" [class.show]="isVisible" [style.display]="isVisible ? 'block' : 'none'" style="overflow-y: auto;">
  <div class="modal-dialog modal-dialog-centered" style="margin: 0.5rem auto; width: calc(100% - 1rem); max-width: 600px;">
    <div class="modal-content">
      <div class="modal-body" style="padding: 15px;">
        <div class="close" (click)="close()">
          <span>&times;</span>
        </div>
        <div class="log-reg-inner">
          <h2 class="title">Create an Account</h2>
          <div class="main-content">
            <form (ngSubmit)="onSignup()" *ngIf="!showOtpVerification">
              <div class="form-group full-width">
                <label>Email</label>
                <input type="email" class="my-form-control" [(ngModel)]="email" [ngModelOptions]="{standalone: true}" placeholder="Enter Your Email">
              </div>
              <div class="form-row">
                <div class="form-group half-width">
                  <label>Full Name</label>
                  <input type="text" class="my-form-control" [(ngModel)]="fullName" [ngModelOptions]="{standalone: true}" placeholder="Enter Your Full Name" required>
                </div>
                <div class="form-group half-width">
                  <label>Phone Number</label>
                  <input type="tel" class="my-form-control" [(ngModel)]="phone" [ngModelOptions]="{standalone: true}" placeholder="Enter Your Phone Number">
                </div>
              </div>
              <div class="form-row">
                <div class="form-group half-width">
                  <label>Password</label>
                  <input [type]="showPassword ? 'text' : 'password'" class="my-form-control" [(ngModel)]="password" [ngModelOptions]="{standalone: true}" placeholder="Enter Your Password" required>
                </div>
                <div class="form-group half-width">
                  <label>Confirm Password</label>
                  <input [type]="showPassword ? 'text' : 'password'" class="my-form-control" [(ngModel)]="confirmPassword" [ngModelOptions]="{standalone: true}" placeholder="Enter Your Confirm Password" required>
                </div>
              </div>
              <div class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" id="showPasswordSignup" [(ngModel)]="showPassword" [ngModelOptions]="{standalone: true}">
                <label class="custom-control-label" for="showPasswordSignup">Show Password</label>
              </div>
              <p class="text-muted small">Note: You must provide either email or phone number (or both)</p>
              <div class="custom-control custom-checkbox">
                <input type="checkbox" class="custom-control-input" id="customCheck1" [(ngModel)]="agreeTerms" [ngModelOptions]="{standalone: true}" required>
                <label class="custom-control-label" for="customCheck1">
                  I agree to the <a href="#">Terms, Privacy Policy and Fees</a>
                </label>
              </div>
              <div class="button-wrapper">
                <button type="submit" class="custom-button2">Register Now</button>
                <p class="or-signup">
                  Already have an account? <a href="#" (click)="switchToLogin()">Login</a>
                </p>
              </div>
            </form>
            
            <!-- OTP Verification Form -->
            <div *ngIf="showOtpVerification && !allVerified">
              <h3>Verify Your Account</h3>
              <p>Choose a verification method:</p>
              
              <!-- Verification Method Tabs -->
              <div class="verification-tabs" style="display: flex; gap: 10px; margin-bottom: 20px;">
                <button 
                  *ngIf="requiresEmailVerification" 
                  type="button" 
                  class="custom-button2" 
                  [style.opacity]="selectedVerificationMethod === 'email' ? '1' : '0.6'"
                  (click)="selectedVerificationMethod = 'email'"
                  style="flex: 1;">
                  {{ emailVerified ? '✓ Email Verified' : 'Verify Email' }}
                </button>
                <button 
                  *ngIf="requiresPhoneVerification" 
                  type="button" 
                  class="custom-button2" 
                  [style.opacity]="selectedVerificationMethod === 'phone' ? '1' : '0.6'"
                  (click)="selectedVerificationMethod = 'phone'"
                  style="flex: 1;">
                  {{ phoneVerified ? '✓ Phone Verified' : 'Verify Phone' }}
                </button>
              </div>
              
              <!-- Email Verification -->
              <div *ngIf="selectedVerificationMethod === 'email' && requiresEmailVerification && !emailVerified">
                <div class="form-group">
                  <label>Email OTP</label>
                  <input type="text" class="my-form-control" [(ngModel)]="emailOtp" placeholder="Enter 6-digit code" maxlength="6">
                </div>
                <div style="display: flex; gap: 10px;">
                  <button type="button" class="custom-button2" (click)="verifyOtp('email')" style="flex: 1;">Verify</button>
                  <button type="button" class="btn btn-sm btn-outline-secondary" (click)="resendOtp('email')">Resend</button>
                </div>
              </div>
              
              <!-- Phone Verification -->
              <div *ngIf="selectedVerificationMethod === 'phone' && requiresPhoneVerification && !phoneVerified">
                <div class="form-group">
                  <label>Phone OTP</label>
                  <input type="text" class="my-form-control" [(ngModel)]="phoneOtp" placeholder="Enter 6-digit code" maxlength="6">
                </div>
                <div style="display: flex; gap: 10px;">
                  <button type="button" class="custom-button2" (click)="verifyOtp('phone')" style="flex: 1;">Verify</button>
                  <button type="button" class="btn btn-sm btn-outline-secondary" (click)="resendOtp('phone')">Resend</button>
                </div>
              </div>
              
              <p class="text-success" style="margin-top: 15px;" *ngIf="emailVerified || phoneVerified">
                {{ emailVerified && phoneVerified ? '✓ Both verified!' : emailVerified ? '✓ Email verified' : '✓ Phone verified' }}
              </p>
            </div>
            
            <!-- All Verified -->
            <div *ngIf="allVerified">
              <h3>Account Verified!</h3>
              <p class="text-success">Your account has been verified successfully. You can now login.</p>
              <button type="button" class="custom-button2" (click)="switchToLogin()">Go to Login</button>
            </div>
            

          </div>
        </div>
      </div>
    </div>
  </div>
</div>