<section class="users-section">
  <div class="card">
    <div class="card-header">
      <h3><i class="fas fa-users"></i> User Management</h3>
      <div class="header-actions">
        <div class="search-box">
          <i class="fas fa-search"></i>
          <input 
            type="text" 
            placeholder="Search users..." 
            [(ngModel)]="usersSearchQuery"
            (input)="onSearchUsers()">
        </div>
        <button class="btn btn-primary" (click)="onAddUser()">
          <i class="fas fa-user-plus"></i> Add User
        </button>
      </div>
    </div>

    <div class="table-responsive">
      <table class="data-table">
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Status</th>
            <th>Verified</th>
            <th>Joined</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          @for (user of users; track user.id) {
            <tr>
              <td data-label="Name">
                <div class="user-info">
                  <i class="fas fa-user-circle"></i>
                  <span>{{ user.full_name }}</span>
                </div>
              </td>
              <td data-label="Email">{{ user.email }}</td>
              <td data-label="Phone">{{ user.phone || 'N/A' }}</td>
              <td data-label="Status">
                <span class="status-badge" [class]="user.is_active ? 'active' : 'inactive'">
                  {{ user.is_active ? 'Active' : 'Inactive' }}
                </span>
              </td>
              <td data-label="Verified">
                <div class="verification-status">
                  <span class="verify-badge" [class]="user.email_verified ? 'verified' : 'unverified'">
                    <i class="fas" [class.fa-check]="user.email_verified" [class.fa-times]="!user.email_verified"></i>
                    Email
                  </span>
                  <span class="verify-badge" [class]="user.phone_verified ? 'verified' : 'unverified'">
                    <i class="fas" [class.fa-check]="user.phone_verified" [class.fa-times]="!user.phone_verified"></i>
                    Phone
                  </span>
                </div>
              </td>
              <td data-label="Joined">
                <span class="timestamp">{{ user.created_at | date:'short' }}</span>
              </td>
              <td data-label="Actions">
                <div class="table-actions">
                  <button class="btn-icon" (click)="onEditUser(user)" title="Edit">
                    <i class="fas fa-edit"></i>
                  </button>
                  <button 
                    class="btn-icon danger" 
                    (click)="onDeleteUser(user.id)"
                    title="Delete">
                    <i class="fas fa-trash"></i>
                  </button>
                </div>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>

    @if (users.length > 0) {
      <div class="table-footer">
        <div class="table-info">
          Showing {{ users.length }} of {{ totalUsersCount }} users
        </div>
        <div class="pagination">
          <button 
            class="btn-icon" 
            (click)="onPrevPage()"
            [disabled]="usersCurrentPage === 1">
            <i class="fas fa-chevron-left"></i>
          </button>
          <span class="page-info">
            Page {{ usersCurrentPage }} of {{ usersTotalPages }}
          </span>
          <button 
            class="btn-icon" 
            (click)="onNextPage()"
            [disabled]="usersCurrentPage === usersTotalPages">
            <i class="fas fa-chevron-right"></i>
          </button>
        </div>
      </div>
    }
  </div>
</section>